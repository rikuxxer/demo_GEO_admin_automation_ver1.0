import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';
import { ErrorBoundary } from './components/ErrorBoundary';
import './index.css';
import './styles/globals.css';
import './utils/fixSampleDataRegistrationTime';

// ãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µæ©Ÿèƒ½é–¢é€£ã®ã‚¨ãƒ©ãƒ¼ã‚’ç„¡è¦–ã™ã‚‹ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
window.addEventListener('unhandledrejection', (event) => {
  const errorMessage = event.reason?.message || String(event.reason);
  
  // æ‹¡å¼µæ©Ÿèƒ½é–¢é€£ã®ã‚¨ãƒ©ãƒ¼ã¯ç„¡è¦–
  if (errorMessage.includes('message channel closed') || 
      errorMessage.includes('asynchronous response') ||
      errorMessage.includes('Extension context invalidated')) {
    event.preventDefault(); // ã‚¨ãƒ©ãƒ¼ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤ºã—ãªã„
    console.debug('ğŸ”‡ æ‹¡å¼µæ©Ÿèƒ½é–¢é€£ã®ã‚¨ãƒ©ãƒ¼ã‚’ç„¡è¦–ã—ã¾ã—ãŸ:', errorMessage);
    return;
  }
  
  // ãã®ä»–ã®ã‚¨ãƒ©ãƒ¼ã¯é€šå¸¸é€šã‚Šå‡¦ç†
});

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <ErrorBoundary>
      <App />
    </ErrorBoundary>
  </React.StrictMode>
);
