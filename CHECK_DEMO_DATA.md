# デモデータが再投入される問題の解決方法

## 🔍 問題の原因

データを削除した後もデモデータが再投入される場合、以下の原因が考えられます：

### 1. デモデータ自動投入が有効になっている

`.env`ファイルに以下の設定がある場合、データが空になると自動的にデモデータが投入されます：

```env
VITE_USE_DEMO_DATA=true
```

---

## ✅ 解決方法

### ステップ1: .envファイルを確認

プロジェクトルートの`.env`ファイルを開き、以下の行を探してください：

```env
VITE_USE_DEMO_DATA=true
```

この行がある場合は、以下のいずれかを行ってください：

**A. 行を削除する（推奨）**
```env
# この行を削除
# VITE_USE_DEMO_DATA=true
```

**B. falseに変更する**
```env
VITE_USE_DEMO_DATA=false
```

**C. コメントアウトする**
```env
# VITE_USE_DEMO_DATA=true
```

---

### ステップ2: 開発サーバーを再起動

環境変数の変更を反映するため、開発サーバーを再起動します：

```powershell
# Ctrl+C でサーバーを停止

# 再起動
npm run dev
```

---

### ステップ3: データを削除

1. ブラウザで http://localhost:5173 を開く

2. 管理者としてログイン
   ```
   Email: admin@example.com
   Password: demo123
   ```

3. サイドバーから「データ管理」を選択

4. 「すべて削除」をクリック

5. ページがリロードされる

6. **デモデータが再投入されないことを確認**

---

### ステップ4: 必要に応じてデモデータを手動で投入

デモデータが必要な場合は、データ管理画面から手動で投入できます：

1. サイドバーから「データ管理」を選択

2. 「デモデータの投入」セクション

3. 「デモデータを投入」ボタンをクリック

---

## 🔧 ブラウザコンソールで確認

デモデータの自動投入が有効かどうかを確認する方法：

1. ブラウザの開発者ツール（F12）を開く

2. Consoleタブを表示

3. 以下を実行：

```javascript
console.log('デモデータ自動投入:', import.meta.env.VITE_USE_DEMO_DATA);
```

**結果:**
- `undefined` または `"false"` → 自動投入は無効 ✅
- `"true"` → 自動投入は有効 ⚠️

---

## 📝 チェックリスト

確認してください：

- [ ] `.env`ファイルに`VITE_USE_DEMO_DATA=true`の記述がない
- [ ] 開発サーバーを再起動した
- [ ] データを削除した
- [ ] ページをリロードしてもデモデータが再投入されない

---

## 🆘 それでも解決しない場合

以下を試してください：

### 1. ブラウザのキャッシュをクリア

```
Chrome: Ctrl + Shift + Delete
Firefox: Ctrl + Shift + Delete
Edge: Ctrl + Shift + Delete
```

「キャッシュされた画像とファイル」を選択して削除

---

### 2. ブラウザコンソールで手動削除

```javascript
// すべてのlocalStorageをクリア
localStorage.clear();
console.log('✅ すべてのデータを削除しました');
location.reload();
```

---

### 3. シークレットモード/プライベートブラウジングで確認

新しいシークレットウィンドウで http://localhost:5173 を開き、
データが空の状態で起動することを確認してください。

---

## 💡 今後の運用

### 開発時にデモデータを使いたい場合

`.env`ファイルに追加：

```env
VITE_USE_DEMO_DATA=true
```

開発サーバーを再起動すると、データが空の場合に自動的にデモデータが投入されます。

### クリーンな状態で開発したい場合

`.env`ファイルから`VITE_USE_DEMO_DATA`の行を削除または`false`に設定します。

必要に応じて「データ管理」画面から手動でデモデータを投入できます。

---

## 🚀 本番環境での注意事項

本番環境では**必ず**以下を確認してください：

```env
# .env (本番環境)
VITE_USE_DEMO_DATA=false  # または行を削除
```

デモデータが本番環境に投入されないようにしてください。


