# BigQueryã‚³ã‚¹ãƒˆæœ€é©åŒ–ã‚¬ã‚¤ãƒ‰

## ğŸ“Š ç¾çŠ¶åˆ†æ

### ç¾åœ¨ã®ã‚¯ã‚¨ãƒªãƒ‘ã‚¿ãƒ¼ãƒ³

#### 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§å–å¾— (`getProjects()`)
```sql
SELECT *
FROM `universegeo_dataset.projects`
ORDER BY COALESCE(_register_datetime, created_at, updated_at) DESC
```

**å•é¡Œç‚¹**:
- `SELECT *` ã«ã‚ˆã‚Šå…¨åˆ—ã‚’ã‚¹ã‚­ãƒ£ãƒ³ï¼ˆä¸è¦ãªåˆ—ã‚‚å«ã‚€ï¼‰
- å…¨ä»¶å–å¾—ï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ãªã—ï¼‰
- æ¡ˆä»¶ãŒå¢—ãˆã‚‹ã¨ã‚¹ã‚­ãƒ£ãƒ³é‡ãŒç·šå½¢ã«å¢—åŠ 

**æƒ³å®šã‚¹ã‚­ãƒ£ãƒ³é‡**:
- ç¾åœ¨ï¼ˆ100æ¡ˆä»¶ï¼‰: ç´„0.2MB/ã‚¯ã‚¨ãƒª
- 1å¹´å¾Œï¼ˆ3,600æ¡ˆä»¶ï¼‰: ç´„7.2MB/ã‚¯ã‚¨ãƒª
- 3å¹´å¾Œï¼ˆ10,800æ¡ˆä»¶ï¼‰: ç´„21.6MB/ã‚¯ã‚¨ãƒª

#### 2. ã‚»ã‚°ãƒ¡ãƒ³ãƒˆå–å¾— (`getSegments()`)
```sql
SELECT *
FROM `universegeo_dataset.segments`
ORDER BY ...
```

**å•é¡Œç‚¹**: åŒæ§˜ã«`SELECT *`ã§å…¨åˆ—ã‚¹ã‚­ãƒ£ãƒ³

#### 3. POIå–å¾— (`getPois()`, `getPoisByProject()`)
```sql
SELECT *
FROM `universegeo_dataset.pois`
WHERE project_id = @project_id
```

**å•é¡Œç‚¹**:
- POIãƒ†ãƒ¼ãƒ–ãƒ«ã¯æœ€ã‚‚å¤§ãããªã‚‹ï¼ˆ1æ¡ˆä»¶ã‚ãŸã‚Š1,000åœ°ç‚¹ Ã— 300æ¡ˆä»¶/æœˆ = 300,000åœ°ç‚¹/æœˆï¼‰
- `SELECT *`ã«ã‚ˆã‚Šå¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚­ãƒ£ãƒ³
- ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã¯ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ãŒã€`SELECT *`ã«ã‚ˆã‚ŠåŠ¹æœãŒé™å®šçš„

**æƒ³å®šã‚¹ã‚­ãƒ£ãƒ³é‡**:
- ç¾åœ¨ï¼ˆ100æ¡ˆä»¶ã€100,000åœ°ç‚¹ï¼‰: ç´„300MB/ã‚¯ã‚¨ãƒª
- 1å¹´å¾Œï¼ˆ3,600æ¡ˆä»¶ã€3,600,000åœ°ç‚¹ï¼‰: ç´„10.8GB/ã‚¯ã‚¨ãƒª âš ï¸
- 3å¹´å¾Œï¼ˆ10,800æ¡ˆä»¶ã€10,800,000åœ°ç‚¹ï¼‰: ç´„32.4GB/ã‚¯ã‚¨ãƒª âš ï¸âš ï¸

### æ¡ˆä»¶ã‚µãƒãƒªã®å‡¦ç†

**ç¾çŠ¶**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§é›†è¨ˆå‡¦ç†ï¼ˆ`SummaryCards.tsx`ãªã©ï¼‰
- âœ… è‰¯ã„ç‚¹: BigQueryã§ã®é›†è¨ˆã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã—ã¦ã„ãªã„
- âš ï¸ å•é¡Œç‚¹: å…¨ä»¶å–å¾—ã—ã¦ã‹ã‚‰ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§é›†è¨ˆã™ã‚‹ãŸã‚ã€ã‚¹ã‚­ãƒ£ãƒ³é‡ã¯å¤‰ã‚ã‚‰ãªã„

## ğŸ’° ã‚³ã‚¹ãƒˆå¢—åŠ ã®æ‡¸å¿µ

### 1. ç·šå½¢å¢—åŠ ã®ãƒªã‚¹ã‚¯

**æ¡ˆä»¶æ•°ãŒå¢—ãˆã‚‹ã¨**:
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§: æ¡ˆä»¶æ•°ã«æ¯”ä¾‹ã—ã¦ã‚¹ã‚­ãƒ£ãƒ³é‡ãŒå¢—åŠ 
- ã‚»ã‚°ãƒ¡ãƒ³ãƒˆä¸€è¦§: ã‚»ã‚°ãƒ¡ãƒ³ãƒˆæ•°ã«æ¯”ä¾‹ã—ã¦ã‚¹ã‚­ãƒ£ãƒ³é‡ãŒå¢—åŠ 
- POIä¸€è¦§: **åœ°ç‚¹æ•°ã«æ¯”ä¾‹ã—ã¦å¤§å¹…ã«ã‚¹ã‚­ãƒ£ãƒ³é‡ãŒå¢—åŠ ** âš ï¸

**è©¦ç®—**ï¼ˆæœˆé–“ã‚¯ã‚¨ãƒªæ•°ã¯å¤‰ã‚ã‚‰ãªã„ã¨ä»®å®šï¼‰:
- ç¾åœ¨: ç´„1.3TB/æœˆ â†’ ç´„270å††/æœˆï¼ˆç„¡æ–™æ 1TBé©ç”¨å¾Œï¼‰
- 1å¹´å¾Œ: ç´„4.7TB/æœˆ â†’ ç´„2,220å††/æœˆï¼ˆç„¡æ–™æ 1TBé©ç”¨å¾Œï¼‰
- 3å¹´å¾Œ: ç´„14.1TB/æœˆ â†’ ç´„7,860å††/æœˆï¼ˆç„¡æ–™æ 1TBé©ç”¨å¾Œï¼‰

### 2. æ¡ˆä»¶ã‚µãƒãƒªã®å½±éŸ¿

**ç¾çŠ¶**: æ¡ˆä»¶ã‚µãƒãƒªã¯ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§é›†è¨ˆ
- å…¨ä»¶å–å¾—ã—ã¦ã‹ã‚‰é›†è¨ˆã™ã‚‹ãŸã‚ã€ã‚¹ã‚­ãƒ£ãƒ³é‡ã¯å¤‰ã‚ã‚‰ãªã„
- ãŸã ã—ã€BigQueryã§é›†è¨ˆã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã—ã¦ã„ãªã„ãŸã‚ã€è¿½åŠ ã‚³ã‚¹ãƒˆã¯ç™ºç”Ÿã—ã¦ã„ãªã„

**æ‡¸å¿µ**: å°†æ¥çš„ã«BigQueryã§é›†è¨ˆå‡¦ç†ã‚’è¡Œã†å ´åˆ
- `COUNT`, `SUM`, `GROUP BY`ãªã©ã®é›†è¨ˆã‚¯ã‚¨ãƒªãŒè¿½åŠ ã•ã‚Œã‚‹å¯èƒ½æ€§
- é›†è¨ˆã‚¯ã‚¨ãƒªã‚‚ã‚¹ã‚­ãƒ£ãƒ³é‡ã«å¿œã˜ã¦ã‚³ã‚¹ãƒˆãŒç™ºç”Ÿ

## ğŸ¯ æœ€é©åŒ–ã®æ¨å¥¨äº‹é …

### 1. SELECT * ã‚’é¿ã‘ã‚‹ï¼ˆæœ€é‡è¦ï¼‰â­

**ç¾çŠ¶**:
```sql
SELECT * FROM `universegeo_dataset.projects`
```

**æœ€é©åŒ–å¾Œ**:
```sql
SELECT 
  project_id,
  project_name,
  advertiser_name,
  project_status,
  _register_datetime,
  created_at,
  updated_at
FROM `universegeo_dataset.projects`
ORDER BY COALESCE(_register_datetime, created_at, updated_at) DESC
```

**åŠ¹æœ**:
- ã‚¹ã‚­ãƒ£ãƒ³é‡ã‚’ç´„30-50%å‰Šæ¸›å¯èƒ½
- å¿…è¦ãªåˆ—ã®ã¿å–å¾—ã™ã‚‹ã“ã¨ã§ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è»¢é€é‡ã‚‚å‰Šæ¸›

### 2. ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè£…

**ç¾çŠ¶**: å…¨ä»¶å–å¾—

**æœ€é©åŒ–å¾Œ**:
```sql
SELECT ...
FROM `universegeo_dataset.projects`
ORDER BY ...
LIMIT 50 OFFSET @offset
```

**åŠ¹æœ**:
- 1å›ã®ã‚¯ã‚¨ãƒªã§å–å¾—ã™ã‚‹ãƒ‡ãƒ¼ã‚¿é‡ã‚’å›ºå®š
- æ¡ˆä»¶ãŒå¢—ãˆã¦ã‚‚ã‚¹ã‚­ãƒ£ãƒ³é‡ãŒä¸€å®š

### 3. é›†è¨ˆå‡¦ç†ã‚’BigQueryã§å®Ÿè¡Œ

**ç¾çŠ¶**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§é›†è¨ˆ

**æœ€é©åŒ–å¾Œ**:
```sql
-- æ¡ˆä»¶ã‚µãƒãƒªã‚’å–å¾—
SELECT 
  project_status,
  COUNT(*) as count
FROM `universegeo_dataset.projects`
GROUP BY project_status
```

**åŠ¹æœ**:
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã®å‡¦ç†è² è·ã‚’å‰Šæ¸›
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è»¢é€é‡ã‚’å‰Šæ¸›ï¼ˆé›†è¨ˆçµæœã®ã¿è»¢é€ï¼‰
- ãŸã ã—ã€ã‚¹ã‚­ãƒ£ãƒ³é‡ã¯å¤‰ã‚ã‚‰ãªã„ï¼ˆå…¨ä»¶ã‚¹ã‚­ãƒ£ãƒ³ã¯å¿…è¦ï¼‰

### 4. ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ—ãƒ«ãƒ¼ãƒ‹ãƒ³ã‚°ã®æ´»ç”¨

**ç¾çŠ¶**: ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã¯è¨­å®šæ¸ˆã¿ï¼ˆ`PARTITION BY DATE`ï¼‰

**æœ€é©åŒ–å¾Œ**:
```sql
-- æ—¥ä»˜ç¯„å›²ã‚’æŒ‡å®šã—ã¦ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ—ãƒ«ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’æ´»ç”¨
SELECT ...
FROM `universegeo_dataset.pois`
WHERE project_id = @project_id
  AND created_at >= @start_date
  AND created_at < @end_date
```

**åŠ¹æœ**:
- å¿…è¦ãªãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã®ã¿ã‚¹ã‚­ãƒ£ãƒ³
- ã‚¹ã‚­ãƒ£ãƒ³é‡ã‚’å¤§å¹…ã«å‰Šæ¸›å¯èƒ½ï¼ˆä¾‹: 1å¹´åˆ†ã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰1ãƒ¶æœˆåˆ†ã®ã¿å–å¾—ï¼‰

### 5. ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®æ´»ç”¨

**æ¨å¥¨**:
- æ¡ˆä»¶ä¸€è¦§: 5åˆ†é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- æ¡ˆä»¶ã‚µãƒãƒª: 1åˆ†é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- ã‚»ã‚°ãƒ¡ãƒ³ãƒˆä¸€è¦§: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå˜ä½ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥

**åŠ¹æœ**:
- ã‚¯ã‚¨ãƒªå®Ÿè¡Œå›æ•°ã‚’å‰Šæ¸›
- ã‚³ã‚¹ãƒˆå‰Šæ¸›ã¨ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ã®æ”¹å–„

### 6. ãƒãƒ†ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ‰ãƒ“ãƒ¥ãƒ¼ã®æ¤œè¨

**ç”¨é€”**: æ¡ˆä»¶ã‚µãƒãƒªãªã©ã®é›†è¨ˆçµæœã‚’äº‹å‰è¨ˆç®—

```sql
CREATE MATERIALIZED VIEW `universegeo_dataset.project_summary_mv`
AS
SELECT 
  project_status,
  COUNT(*) as count,
  COUNT(DISTINCT project_id) as project_count
FROM `universegeo_dataset.projects`
GROUP BY project_status;
```

**åŠ¹æœ**:
- é›†è¨ˆã‚¯ã‚¨ãƒªã®å®Ÿè¡Œæ™‚é–“ã‚’çŸ­ç¸®
- ãŸã ã—ã€ãƒãƒ†ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ‰ãƒ“ãƒ¥ãƒ¼è‡ªä½“ã®æ›´æ–°ã‚³ã‚¹ãƒˆãŒç™ºç”Ÿ

## ğŸ“ˆ ã‚³ã‚¹ãƒˆå¢—åŠ ã®è©¦ç®—

### æœ€é©åŒ–ãªã—ã®å ´åˆ

| æœŸé–“ | æ¡ˆä»¶æ•° | åœ°ç‚¹æ•° | æœˆé–“ã‚¹ã‚­ãƒ£ãƒ³é‡ | æœˆé¡ã‚³ã‚¹ãƒˆï¼ˆç„¡æ–™æ é©ç”¨å¾Œï¼‰ |
|------|--------|--------|----------------|---------------------------|
| ç¾åœ¨ | 100 | 100,000 | 1.3TB | ç´„270å†† |
| 1å¹´å¾Œ | 3,600 | 3,600,000 | 4.7TB | ç´„2,220å†† |
| 3å¹´å¾Œ | 10,800 | 10,800,000 | 14.1TB | ç´„7,860å†† |

### æœ€é©åŒ–ã‚ã‚Šã®å ´åˆï¼ˆSELECT * ã‚’é¿ã‘ã‚‹ + ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼‰

| æœŸé–“ | æ¡ˆä»¶æ•° | åœ°ç‚¹æ•° | æœˆé–“ã‚¹ã‚­ãƒ£ãƒ³é‡ | æœˆé¡ã‚³ã‚¹ãƒˆï¼ˆç„¡æ–™æ é©ç”¨å¾Œï¼‰ |
|------|--------|--------|----------------|---------------------------|
| ç¾åœ¨ | 100 | 100,000 | 0.65TB | ç„¡æ–™ï¼ˆç„¡æ–™æ å†…ï¼‰ |
| 1å¹´å¾Œ | 3,600 | 3,600,000 | 2.35TB | ç´„810å†† |
| 3å¹´å¾Œ | 10,800 | 10,800,000 | 7.05TB | ç´„3,630å†† |

**å‰Šæ¸›åŠ¹æœ**: ç´„50-60%ã®ã‚³ã‚¹ãƒˆå‰Šæ¸›

### æœ€é©åŒ–ã‚ã‚Šã®å ´åˆï¼ˆSELECT * ã‚’é¿ã‘ã‚‹ + ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ + ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ—ãƒ«ãƒ¼ãƒ‹ãƒ³ã‚°ï¼‰

| æœŸé–“ | æ¡ˆä»¶æ•° | åœ°ç‚¹æ•° | æœˆé–“ã‚¹ã‚­ãƒ£ãƒ³é‡ | æœˆé¡ã‚³ã‚¹ãƒˆï¼ˆç„¡æ–™æ é©ç”¨å¾Œï¼‰ |
|------|--------|--------|----------------|---------------------------|
| ç¾åœ¨ | 100 | 100,000 | 0.65TB | ç„¡æ–™ï¼ˆç„¡æ–™æ å†…ï¼‰ |
| 1å¹´å¾Œ | 3,600 | 3,600,000 | 1.2TB | ç´„120å†† |
| 3å¹´å¾Œ | 10,800 | 10,800,000 | 3.6TB | ç´„1,560å†† |

**å‰Šæ¸›åŠ¹æœ**: ç´„70-80%ã®ã‚³ã‚¹ãƒˆå‰Šæ¸›

## ğŸš¨ ç‰¹ã«æ³¨æ„ã™ã¹ãç‚¹

### 1. POIãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚¹ã‚­ãƒ£ãƒ³é‡

**æœ€å¤§ã®ã‚³ã‚¹ãƒˆè¦å› **:
- POIãƒ†ãƒ¼ãƒ–ãƒ«ã¯æœ€ã‚‚å¤§ãããªã‚‹ï¼ˆ1æ¡ˆä»¶ã‚ãŸã‚Š1,000åœ°ç‚¹ï¼‰
- `SELECT *`ã«ã‚ˆã‚Šå¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚­ãƒ£ãƒ³
- æ¡ˆä»¶ãŒå¢—ãˆã‚‹ã¨æŒ‡æ•°é–¢æ•°çš„ã«ã‚¹ã‚­ãƒ£ãƒ³é‡ãŒå¢—åŠ 

**å¯¾ç­–**:
- âœ… å¿…è¦ãªåˆ—ã®ã¿é¸æŠ
- âœ… ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè£…
- âœ… ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ—ãƒ«ãƒ¼ãƒ‹ãƒ³ã‚°ã®æ´»ç”¨
- âœ… ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDã‚„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆIDã§ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

### 2. æ¡ˆä»¶ã‚µãƒãƒªã®é›†è¨ˆå‡¦ç†

**ç¾çŠ¶**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§é›†è¨ˆï¼ˆè¿½åŠ ã‚³ã‚¹ãƒˆãªã—ï¼‰

**å°†æ¥çš„ãªæ‡¸å¿µ**:
- BigQueryã§é›†è¨ˆå‡¦ç†ã‚’è¡Œã†å ´åˆã€ã‚¹ã‚­ãƒ£ãƒ³é‡ã«å¿œã˜ã¦ã‚³ã‚¹ãƒˆãŒç™ºç”Ÿ
- ãŸã ã—ã€é›†è¨ˆçµæœã®ã¿ã‚’è»¢é€ã™ã‚‹ãŸã‚ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è»¢é€é‡ã¯å‰Šæ¸›

**æ¨å¥¨**:
- é›†è¨ˆå‡¦ç†ã¯BigQueryã§å®Ÿè¡Œï¼ˆã‚¹ã‚­ãƒ£ãƒ³é‡ã¯å¤‰ã‚ã‚‰ãªã„ãŒã€è»¢é€é‡ã‚’å‰Šæ¸›ï¼‰
- ãƒãƒ†ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ‰ãƒ“ãƒ¥ãƒ¼ã®æ¤œè¨ï¼ˆæ›´æ–°ã‚³ã‚¹ãƒˆã¨ã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ï¼‰

### 3. ç„¡æ–™æ ã®æ´»ç”¨

**BigQueryç„¡æ–™æ **:
- ã‚¯ã‚¨ãƒª: æœ€åˆã®1TB/æœˆã¯ç„¡æ–™
- ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸: æœ€åˆã®10GB/æœˆã¯ç„¡æ–™

**æ¨å¥¨**:
- æœ€é©åŒ–ã«ã‚ˆã‚Šç„¡æ–™æ å†…ã§é‹ç”¨å¯èƒ½ãªæœŸé–“ã‚’å»¶é•·
- ç„¡æ–™æ ã‚’è¶…éã™ã‚‹å ´åˆã¯ã€äºˆç®—ã‚¢ãƒ©ãƒ¼ãƒˆã‚’è¨­å®š

## ğŸ“ å®Ÿè£…å„ªå…ˆåº¦

### é«˜å„ªå…ˆåº¦ï¼ˆå³åº§ã«å®Ÿè£…æ¨å¥¨ï¼‰

1. **SELECT * ã‚’é¿ã‘ã‚‹** â­â­â­
   - åŠ¹æœ: 50-60%ã®ã‚³ã‚¹ãƒˆå‰Šæ¸›
   - å®Ÿè£…é›£æ˜“åº¦: ä½
   - å½±éŸ¿ç¯„å›²: å…¨ã‚¯ã‚¨ãƒª

2. **ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè£…** â­â­
   - åŠ¹æœ: ã‚¹ã‚­ãƒ£ãƒ³é‡ã®å›ºå®šåŒ–
   - å®Ÿè£…é›£æ˜“åº¦: ä¸­
   - å½±éŸ¿ç¯„å›²: ä¸€è¦§å–å¾—ã‚¯ã‚¨ãƒª

### ä¸­å„ªå…ˆåº¦ï¼ˆ1-3ãƒ¶æœˆä»¥å†…ã«å®Ÿè£…æ¨å¥¨ï¼‰

3. **ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ—ãƒ«ãƒ¼ãƒ‹ãƒ³ã‚°ã®æ´»ç”¨** â­â­
   - åŠ¹æœ: 70-80%ã®ã‚³ã‚¹ãƒˆå‰Šæ¸›
   - å®Ÿè£…é›£æ˜“åº¦: ä¸­
   - å½±éŸ¿ç¯„å›²: æ—¥ä»˜ç¯„å›²æŒ‡å®šã‚¯ã‚¨ãƒª

4. **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®æ´»ç”¨** â­
   - åŠ¹æœ: ã‚¯ã‚¨ãƒªå®Ÿè¡Œå›æ•°ã®å‰Šæ¸›
   - å®Ÿè£…é›£æ˜“åº¦: ä½
   - å½±éŸ¿ç¯„å›²: ä¸€è¦§å–å¾—ã€ã‚µãƒãƒªå–å¾—

### ä½å„ªå…ˆåº¦ï¼ˆå¿…è¦ã«å¿œã˜ã¦å®Ÿè£…ï¼‰

5. **ãƒãƒ†ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ‰ãƒ“ãƒ¥ãƒ¼ã®æ¤œè¨** â­
   - åŠ¹æœ: é›†è¨ˆã‚¯ã‚¨ãƒªã®é«˜é€ŸåŒ–
   - å®Ÿè£…é›£æ˜“åº¦: é«˜
   - å½±éŸ¿ç¯„å›²: é›†è¨ˆå‡¦ç†

6. **é›†è¨ˆå‡¦ç†ã‚’BigQueryã§å®Ÿè¡Œ** â­
   - åŠ¹æœ: è»¢é€é‡ã®å‰Šæ¸›
   - å®Ÿè£…é›£æ˜“åº¦: ä¸­
   - å½±éŸ¿ç¯„å›²: ã‚µãƒãƒªå–å¾—

## ğŸ” ç›£è¦–ã¨ã‚¢ãƒ©ãƒ¼ãƒˆ

### æ¨å¥¨ç›£è¦–é …ç›®

1. **æœˆé–“ã‚¹ã‚­ãƒ£ãƒ³é‡**
   - ç›®æ¨™: 1TB/æœˆä»¥å†…ï¼ˆç„¡æ–™æ å†…ï¼‰
   - ã‚¢ãƒ©ãƒ¼ãƒˆ: 1.5TB/æœˆã‚’è¶…éã—ãŸå ´åˆ

2. **ã‚¯ã‚¨ãƒªå®Ÿè¡Œå›æ•°**
   - ç›®æ¨™: æœˆé–“50,000å›ä»¥å†…
   - ã‚¢ãƒ©ãƒ¼ãƒˆ: æœˆé–“100,000å›ã‚’è¶…éã—ãŸå ´åˆ

3. **å¹³å‡ã‚¹ã‚­ãƒ£ãƒ³é‡/ã‚¯ã‚¨ãƒª**
   - ç›®æ¨™: 20MB/ã‚¯ã‚¨ãƒªä»¥å†…
   - ã‚¢ãƒ©ãƒ¼ãƒˆ: 50MB/ã‚¯ã‚¨ãƒªã‚’è¶…éã—ãŸå ´åˆ

### GCPäºˆç®—ã‚¢ãƒ©ãƒ¼ãƒˆã®è¨­å®š

1. BigQueryäºˆç®—: æœˆé¡5,000å††
2. å…¨ä½“äºˆç®—: æœˆé¡10,000å††
3. ã‚¢ãƒ©ãƒ¼ãƒˆé–¾å€¤: 50%, 90%, 100%

## ğŸ’¡ ãã®ä»–ã®ã‚³ã‚¹ãƒˆå‰Šæ¸›æ–¹æ³•

### 7. ãƒ‡ãƒ¼ã‚¿ä¿æŒæœŸé–“ã®æœ€é©åŒ–ï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«æœ‰åŠ¹æœŸé™ã®è¨­å®šï¼‰

**ç¾çŠ¶**: ãƒ‡ãƒ¼ã‚¿ãŒç„¡æœŸé™ã«ä¿æŒã•ã‚Œã‚‹

**æœ€é©åŒ–å¾Œ**:
```sql
-- ãƒ†ãƒ¼ãƒ–ãƒ«ã«æœ‰åŠ¹æœŸé™ã‚’è¨­å®šï¼ˆä¾‹: 3å¹´å¾Œï¼‰
ALTER TABLE `universegeo_dataset.pois`
SET OPTIONS(
  expiration_timestamp=TIMESTAMP_ADD(CURRENT_TIMESTAMP(), INTERVAL 3 YEAR)
);

-- ã¾ãŸã¯ã€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³å˜ä½ã§æœ‰åŠ¹æœŸé™ã‚’è¨­å®š
ALTER TABLE `universegeo_dataset.pois`
SET OPTIONS(
  partition_expiration_days=1095  -- 3å¹´ = 1095æ—¥
);
```

**åŠ¹æœ**:
- å¤ã„ãƒ‡ãƒ¼ã‚¿ãŒè‡ªå‹•çš„ã«å‰Šé™¤ã•ã‚Œã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆã‚’å‰Šæ¸›
- 3å¹´ä¿æŒã®å ´åˆ: ç´„99å††/æœˆ â†’ ç´„33å††/æœˆï¼ˆ3å¹´ã§å‰Šé™¤ï¼‰

**æ¨å¥¨è¨­å®š**:
- **POIãƒ†ãƒ¼ãƒ–ãƒ«**: 3å¹´ï¼ˆãƒ‡ãƒ¼ã‚¿é€£æºå¾Œ3å¹´ã§å‰Šé™¤ï¼‰
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«**: 5å¹´ï¼ˆé•·æœŸä¿æŒï¼‰
- **ã‚»ã‚°ãƒ¡ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«**: 3å¹´ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨åŒæœŸï¼‰
- **å¤‰æ›´å±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ«**: 1å¹´ï¼ˆçŸ­æœŸä¿æŒï¼‰

### 8. ãƒ‡ãƒ¼ã‚¿ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æˆ¦ç•¥

**ç”¨é€”**: å¤ã„ãƒ‡ãƒ¼ã‚¿ã‚’ä½ã‚³ã‚¹ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ç§»å‹•

**æ–¹æ³•1: Cloud Storageã¸ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ**
```sql
-- 3å¹´ä»¥ä¸Šå¤ã„ãƒ‡ãƒ¼ã‚¿ã‚’Cloud Storageã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
EXPORT DATA OPTIONS(
  uri='gs://universegeo-archive/pois_2020/*.json',
  format='JSON'
) AS
SELECT *
FROM `universegeo_dataset.pois`
WHERE created_at < TIMESTAMP_SUB(CURRENT_TIMESTAMP(), INTERVAL 3 YEAR);
```

**æ–¹æ³•2: åˆ¥ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®ç§»å‹•**
```sql
-- ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ç”¨ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆ
CREATE TABLE `universegeo_dataset.pois_archive`
LIKE `universegeo_dataset.pois`;

-- å¤ã„ãƒ‡ãƒ¼ã‚¿ã‚’ç§»å‹•
INSERT INTO `universegeo_dataset.pois_archive`
SELECT * FROM `universegeo_dataset.pois`
WHERE created_at < TIMESTAMP_SUB(CURRENT_TIMESTAMP(), INTERVAL 3 YEAR);

-- å…ƒã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰å‰Šé™¤
DELETE FROM `universegeo_dataset.pois`
WHERE created_at < TIMESTAMP_SUB(CURRENT_TIMESTAMP(), INTERVAL 3 YEAR);
```

**åŠ¹æœ**:
- ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆ: $0.020/GB-æœˆ â†’ $0.004/GB-æœˆï¼ˆColdline Storageï¼‰
- ç´„80%ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆå‰Šæ¸›

### 9. ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ã®æ´»ç”¨

**ç”¨é€”**: ã‚¯ã‚¨ãƒªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã¨ã‚¹ã‚­ãƒ£ãƒ³é‡å‰Šæ¸›

**æœ€é©åŒ–å¾Œ**:
```sql
-- POIãƒ†ãƒ¼ãƒ–ãƒ«ã«ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ã‚’è¿½åŠ 
CREATE TABLE `universegeo_dataset.pois`
(
  -- ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å®šç¾©...
)
PARTITION BY DATE(created_at)
CLUSTER BY project_id, segment_id
OPTIONS(
  description="POIï¼ˆåœ°ç‚¹ï¼‰æƒ…å ±"
);
```

**åŠ¹æœ**:
- `project_id`ã‚„`segment_id`ã§ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ™‚ã«ã‚¹ã‚­ãƒ£ãƒ³é‡ã‚’å‰Šæ¸›
- ã‚¯ã‚¨ãƒªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å‘ä¸Š
- ã‚³ã‚¹ãƒˆå‰Šæ¸›: ç´„10-30%

**æ¨å¥¨ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°**:
- **POIãƒ†ãƒ¼ãƒ–ãƒ«**: `project_id`, `segment_id`
- **ã‚»ã‚°ãƒ¡ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«**: `project_id`
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«**: `project_status`

### 10. ã‚¯ã‚¨ãƒªçµæœã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®æ´»ç”¨

**ç¾çŠ¶**: ã‚¯ã‚¨ãƒªçµæœãŒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã„ãªã„å¯èƒ½æ€§

**æœ€é©åŒ–å¾Œ**:
```typescript
// ã‚¯ã‚¨ãƒªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®šã‚’è¿½åŠ 
const queryOptions = {
  query: query,
  useQueryCache: true,  // ã‚¯ã‚¨ãƒªçµæœã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æœ‰åŠ¹åŒ–
  useLegacySql: false,
};
```

**åŠ¹æœ**:
- åŒã˜ã‚¯ã‚¨ãƒªã‚’24æ™‚é–“ä»¥å†…ã«å†å®Ÿè¡Œã—ãŸå ´åˆã€ã‚¹ã‚­ãƒ£ãƒ³é‡ãŒ0
- æ¡ˆä»¶ä¸€è¦§ãªã©ã®é »ç¹ã«å®Ÿè¡Œã•ã‚Œã‚‹ã‚¯ã‚¨ãƒªã§åŠ¹æœå¤§
- ã‚³ã‚¹ãƒˆå‰Šæ¸›: ç´„20-40%ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡ã«ã‚ˆã‚‹ï¼‰

### 11. ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚¤ãƒ³ã‚µãƒ¼ãƒˆã®æœ€é©åŒ–

**ç¾çŠ¶**: ãƒãƒƒãƒã‚¤ãƒ³ã‚µãƒ¼ãƒˆã‚’ä½¿ç”¨

**æœ€é©åŒ–å¾Œ**:
```typescript
// ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚¤ãƒ³ã‚µãƒ¼ãƒˆã‚’ä½¿ç”¨ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§ãŒå¿…è¦ãªå ´åˆï¼‰
await table.insert(rows, {
  skipInvalidRows: true,
  ignoreUnknownValues: true,
  rawInsertIds: true,  // é‡è¤‡ãƒã‚§ãƒƒã‚¯ã‚’æœ‰åŠ¹åŒ–
});
```

**åŠ¹æœ**:
- ãƒãƒƒãƒå‡¦ç†ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã‚’å‰Šæ¸›
- ãŸã ã—ã€ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚¤ãƒ³ã‚µãƒ¼ãƒˆã¯è¿½åŠ ã‚³ã‚¹ãƒˆãŒç™ºç”Ÿï¼ˆ$0.01/200MBï¼‰

**æ¨å¥¨**:
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§ãŒä¸è¦ãªå ´åˆ: ãƒãƒƒãƒã‚¤ãƒ³ã‚µãƒ¼ãƒˆã‚’ç¶™ç¶š
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§ãŒå¿…è¦ãªå ´åˆ: ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚¤ãƒ³ã‚µãƒ¼ãƒˆã‚’æ¤œè¨

### 12. å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®æ´»ç”¨ï¼ˆCloud Storageï¼‰

**ç”¨é€”**: é »ç¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãªã„ãƒ‡ãƒ¼ã‚¿ã‚’Cloud Storageã«ä¿å­˜

**æ–¹æ³•**:
```sql
-- å¤–éƒ¨ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆ
CREATE EXTERNAL TABLE `universegeo_dataset.pois_external`
OPTIONS (
  format='JSON',
  uris=['gs://universegeo-data/pois/*.json']
);
```

**åŠ¹æœ**:
- ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆ: $0.020/GB-æœˆ â†’ $0.023/GB-æœˆï¼ˆStandard Storageï¼‰
- ãŸã ã—ã€ã‚¯ã‚¨ãƒªæ™‚ã«ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€ãŸã‚ã€ã‚¯ã‚¨ãƒªã‚³ã‚¹ãƒˆã¯å¤‰ã‚ã‚‰ãªã„
- ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«é©ã—ã¦ã„ã‚‹

### 13. ä¸è¦ãªãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤

**ç¾çŠ¶**: å‰Šé™¤ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãŒæ®‹ã£ã¦ã„ã‚‹å¯èƒ½æ€§

**æœ€é©åŒ–å¾Œ**:
```sql
-- è«–ç†å‰Šé™¤ãƒ•ãƒ©ã‚°ãŒã‚ã‚‹å ´åˆã€ç‰©ç†å‰Šé™¤ã‚’å®Ÿè¡Œ
DELETE FROM `universegeo_dataset.pois`
WHERE deleted_at IS NOT NULL
  AND deleted_at < TIMESTAMP_SUB(CURRENT_TIMESTAMP(), INTERVAL 90 DAY);
```

**åŠ¹æœ**:
- ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆã®å‰Šæ¸›
- ã‚¯ã‚¨ãƒªã‚¹ã‚­ãƒ£ãƒ³é‡ã®å‰Šæ¸›

### 14. ãƒ†ãƒ¼ãƒ–ãƒ«ã®çµ±åˆãƒ»åˆ†å‰²ã®æ¤œè¨

**ç¾çŠ¶**: å„ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã”ã¨ã«ãƒ†ãƒ¼ãƒ–ãƒ«ãŒåˆ†ã‹ã‚Œã¦ã„ã‚‹

**æ¤œè¨äº‹é …**:
- **çµ±åˆ**: é–¢é€£ãƒ‡ãƒ¼ã‚¿ã‚’1ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«çµ±åˆï¼ˆJOINã®å‰Šæ¸›ï¼‰
- **åˆ†å‰²**: å¤§ããªãƒ†ãƒ¼ãƒ–ãƒ«ã‚’åˆ†å‰²ï¼ˆãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã®åŠ¹æœã‚’æœ€å¤§åŒ–ï¼‰

**ä¾‹: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ+ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®çµ±åˆ**
```sql
-- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’çµ±åˆï¼ˆéæ¨å¥¨: æ­£è¦åŒ–ã®åŸå‰‡ã«åã™ã‚‹ï¼‰
-- ãŸã ã—ã€ç‰¹å®šã®ã‚¯ã‚¨ãƒªãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã¯åŠ¹æœçš„
```

**æ¨å¥¨**: ç¾åœ¨ã®ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆã‚’ç¶­æŒï¼ˆæ­£è¦åŒ–ã•ã‚Œã¦ã„ã‚‹ï¼‰

### 15. ã‚¯ã‚¨ãƒªã®å®Ÿè¡Œè¨ˆç”»ã®æœ€é©åŒ–

**æ–¹æ³•**: ã‚¯ã‚¨ãƒªã®å®Ÿè¡Œè¨ˆç”»ã‚’ç¢ºèªã—ã¦æœ€é©åŒ–

```sql
-- ã‚¯ã‚¨ãƒªã®å®Ÿè¡Œè¨ˆç”»ã‚’ç¢ºèª
EXPLAIN SELECT ...
FROM `universegeo_dataset.pois`
WHERE project_id = 'PRJ-1';
```

**æœ€é©åŒ–ã®ãƒã‚¤ãƒ³ãƒˆ**:
- ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ—ãƒ«ãƒ¼ãƒ‹ãƒ³ã‚°ãŒæ©Ÿèƒ½ã—ã¦ã„ã‚‹ã‹ç¢ºèª
- ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ãŒåŠ¹æœçš„ã«æ©Ÿèƒ½ã—ã¦ã„ã‚‹ã‹ç¢ºèª
- ä¸è¦ãªJOINã‚„ã‚µãƒ–ã‚¯ã‚¨ãƒªã®å‰Šæ¸›

### 16. ä¸¦åˆ—å‡¦ç†ã®æ´»ç”¨

**ç¾çŠ¶**: ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«ã«ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œ

**æœ€é©åŒ–å¾Œ**:
```typescript
// è¤‡æ•°ã®ã‚¯ã‚¨ãƒªã‚’ä¸¦åˆ—å®Ÿè¡Œ
const [projects, segments, pois] = await Promise.all([
  getProjects(),
  getSegments(),
  getPois(),
]);
```

**åŠ¹æœ**:
- ã‚¯ã‚¨ãƒªå®Ÿè¡Œæ™‚é–“ã®çŸ­ç¸®
- ã‚³ã‚¹ãƒˆã¯å¤‰ã‚ã‚‰ãªã„ãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ãŒå‘ä¸Š

### 17. ãƒ‡ãƒ¼ã‚¿åœ§ç¸®ã®æ´»ç”¨

**BigQueryã®è‡ªå‹•åœ§ç¸®**:
- BigQueryã¯è‡ªå‹•çš„ã«ãƒ‡ãƒ¼ã‚¿ã‚’åœ§ç¸®ï¼ˆç´„10:1ã®åœ§ç¸®ç‡ï¼‰
- ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆã¯åœ§ç¸®å¾Œã®ã‚µã‚¤ã‚ºã§èª²é‡‘

**åŠ¹æœ**:
- æ—¢ã«è‡ªå‹•çš„ã«é©ç”¨ã•ã‚Œã¦ã„ã‚‹
- è¿½åŠ ã®è¨­å®šã¯ä¸è¦

### 18. ãƒãƒƒãƒå‡¦ç†ã®æœ€é©åŒ–

**ç¾çŠ¶**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†

**æœ€é©åŒ–å¾Œ**:
```typescript
// ãƒãƒƒãƒå‡¦ç†ã§è¤‡æ•°ã®æ“ä½œã‚’ã¾ã¨ã‚ã¦å®Ÿè¡Œ
const batchOperations = [
  { type: 'insert', data: newPois },
  { type: 'update', data: updatedPois },
  { type: 'delete', data: deletedPoiIds },
];

// 1å›ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã§å®Ÿè¡Œ
await executeBatchOperations(batchOperations);
```

**åŠ¹æœ**:
- ã‚¯ã‚¨ãƒªå®Ÿè¡Œå›æ•°ã®å‰Šæ¸›
- ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚³ã‚¹ãƒˆã®å‰Šæ¸›

### 19. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®æœ€é©åŒ–ï¼ˆå°†æ¥çš„ã«ï¼‰

**æ³¨æ„**: BigQueryã¯è‡ªå‹•çš„ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ç®¡ç†

**å°†æ¥çš„ãªæ¤œè¨äº‹é …**:
- æ¤œç´¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆSearch Indexï¼‰ã®æ´»ç”¨
- ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ï¼ˆVector Searchï¼‰ã®æ´»ç”¨

### 20. ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã¨ã‚¢ãƒ©ãƒ¼ãƒˆã®å¼·åŒ–

**æ¨å¥¨ç›£è¦–é …ç›®**:
1. **ã‚¯ã‚¨ãƒªã‚³ã‚¹ãƒˆ**: æœˆé–“ã‚¹ã‚­ãƒ£ãƒ³é‡ã€å¹³å‡ã‚¹ã‚­ãƒ£ãƒ³é‡/ã‚¯ã‚¨ãƒª
2. **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆ**: ãƒ†ãƒ¼ãƒ–ãƒ«ã‚µã‚¤ã‚ºã€ãƒ‡ãƒ¼ã‚¿å¢—åŠ ç‡
3. **ã‚¯ã‚¨ãƒªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: å®Ÿè¡Œæ™‚é–“ã€ã‚¹ãƒ­ãƒƒãƒˆä½¿ç”¨é‡
4. **ã‚¨ãƒ©ãƒ¼ç‡**: å¤±æ•—ã—ãŸã‚¯ã‚¨ãƒªã®å‰²åˆ

**ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š**:
```yaml
# GCPäºˆç®—ã‚¢ãƒ©ãƒ¼ãƒˆ
budget_amount: 10000  # æœˆé¡10,000å††
alert_thresholds:
  - percentage: 50
  - percentage: 90
  - percentage: 100
```

### 21. ã‚¯ã‚¨ãƒªã®æœ€é©åŒ–ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

**å®Ÿè£…å‰ã®ç¢ºèªäº‹é …**:
- [ ] `SELECT *` ã‚’é¿ã‘ã€å¿…è¦ãªåˆ—ã®ã¿é¸æŠ
- [ ] ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ—ãƒ«ãƒ¼ãƒ‹ãƒ³ã‚°ãŒæ©Ÿèƒ½ã—ã¦ã„ã‚‹ã‹ç¢ºèª
- [ ] ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ãŒåŠ¹æœçš„ã«æ©Ÿèƒ½ã—ã¦ã„ã‚‹ã‹ç¢ºèª
- [ ] ä¸è¦ãªJOINã‚„ã‚µãƒ–ã‚¯ã‚¨ãƒªã‚’å‰Šæ¸›
- [ ] ã‚¯ã‚¨ãƒªçµæœã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æœ‰åŠ¹åŒ–
- [ ] ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…
- [ ] æ—¥ä»˜ç¯„å›²ã‚’æŒ‡å®šã—ã¦ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ—ãƒ«ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’æ´»ç”¨

### 22. ã‚³ã‚¹ãƒˆå‰Šæ¸›ã®å„ªå…ˆé †ä½ï¼ˆç·åˆï¼‰

| å„ªå…ˆåº¦ | æœ€é©åŒ–æ–¹æ³• | åŠ¹æœ | å®Ÿè£…é›£æ˜“åº¦ | å®Ÿè£…æ™‚é–“ |
|--------|-----------|------|-----------|---------|
| â­â­â­ | SELECT * ã‚’é¿ã‘ã‚‹ | 50-60%å‰Šæ¸› | ä½ | 1-2æ—¥ |
| â­â­â­ | ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ | ã‚¹ã‚­ãƒ£ãƒ³é‡å›ºå®šåŒ– | ä¸­ | 3-5æ—¥ |
| â­â­ | ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ—ãƒ«ãƒ¼ãƒ‹ãƒ³ã‚° | 70-80%å‰Šæ¸› | ä¸­ | 2-3æ—¥ |
| â­â­ | ãƒ‡ãƒ¼ã‚¿ä¿æŒæœŸé–“ã®æœ€é©åŒ– | ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å‰Šæ¸› | ä½ | 1æ—¥ |
| â­â­ | ã‚¯ã‚¨ãƒªçµæœã‚­ãƒ£ãƒƒã‚·ãƒ¥ | 20-40%å‰Šæ¸› | ä½ | 1æ—¥ |
| â­â­ | ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚° | 10-30%å‰Šæ¸› | ä¸­ | 2-3æ—¥ |
| â­ | ãƒ‡ãƒ¼ã‚¿ã‚¢ãƒ¼ã‚«ã‚¤ãƒ– | ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸80%å‰Šæ¸› | é«˜ | 5-10æ—¥ |
| â­ | ãƒãƒ†ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ‰ãƒ“ãƒ¥ãƒ¼ | é›†è¨ˆé«˜é€ŸåŒ– | é«˜ | 3-5æ—¥ |

## ğŸ“Š ç·åˆçš„ãªã‚³ã‚¹ãƒˆå‰Šæ¸›åŠ¹æœ

### æœ€é©åŒ–ãªã—ã®å ´åˆ

| æœŸé–“ | æ¡ˆä»¶æ•° | åœ°ç‚¹æ•° | ã‚¯ã‚¨ãƒªã‚³ã‚¹ãƒˆ | ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆ | åˆè¨ˆ |
|------|--------|--------|------------|----------------|------|
| ç¾åœ¨ | 100 | 100,000 | 270å†† | 33å†† | 303å†† |
| 1å¹´å¾Œ | 3,600 | 3,600,000 | 2,220å†† | 33å†† | 2,253å†† |
| 3å¹´å¾Œ | 10,800 | 10,800,000 | 7,860å†† | 99å†† | 7,959å†† |

### æœ€é©åŒ–ã‚ã‚Šã®å ´åˆï¼ˆé«˜å„ªå…ˆåº¦ã®ã¿å®Ÿè£…ï¼‰

| æœŸé–“ | æ¡ˆä»¶æ•° | åœ°ç‚¹æ•° | ã‚¯ã‚¨ãƒªã‚³ã‚¹ãƒˆ | ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆ | åˆè¨ˆ | å‰Šæ¸›ç‡ |
|------|--------|--------|------------|----------------|------|--------|
| ç¾åœ¨ | 100 | 100,000 | 0å††ï¼ˆç„¡æ–™æ å†…ï¼‰ | 33å†† | 33å†† | 89% |
| 1å¹´å¾Œ | 3,600 | 3,600,000 | 120å†† | 33å†† | 153å†† | 93% |
| 3å¹´å¾Œ | 10,800 | 10,800,000 | 1,560å†† | 33å†† | 1,593å†† | 80% |

### æœ€é©åŒ–ã‚ã‚Šã®å ´åˆï¼ˆå…¨é …ç›®å®Ÿè£…ï¼‰

| æœŸé–“ | æ¡ˆä»¶æ•° | åœ°ç‚¹æ•° | ã‚¯ã‚¨ãƒªã‚³ã‚¹ãƒˆ | ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆ | åˆè¨ˆ | å‰Šæ¸›ç‡ |
|------|--------|--------|------------|----------------|------|--------|
| ç¾åœ¨ | 100 | 100,000 | 0å††ï¼ˆç„¡æ–™æ å†…ï¼‰ | 33å†† | 33å†† | 89% |
| 1å¹´å¾Œ | 3,600 | 3,600,000 | 60å†† | 20å†† | 80å†† | 96% |
| 3å¹´å¾Œ | 10,800 | 10,800,000 | 780å†† | 20å†† | 800å†† | 90% |

**ç·åˆå‰Šæ¸›åŠ¹æœ**: ç´„80-96%ã®ã‚³ã‚¹ãƒˆå‰Šæ¸›

## ğŸ“š å‚è€ƒè³‡æ–™

- [BigQueryæ–™é‡‘](https://cloud.google.com/bigquery/pricing)
- [BigQueryæœ€é©åŒ–ã‚¬ã‚¤ãƒ‰](https://cloud.google.com/bigquery/docs/best-practices-costs)
- [ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ—ãƒ«ãƒ¼ãƒ‹ãƒ³ã‚°](https://cloud.google.com/bigquery/docs/partitioned-tables)
- [ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°](https://cloud.google.com/bigquery/docs/clustered-tables)
- [ã‚¯ã‚¨ãƒªçµæœã‚­ãƒ£ãƒƒã‚·ãƒ¥](https://cloud.google.com/bigquery/docs/cached-results)
- [ãƒ‡ãƒ¼ã‚¿ä¿æŒæœŸé–“ã®è¨­å®š](https://cloud.google.com/bigquery/docs/managing-tables#set_expiration)
